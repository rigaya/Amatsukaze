ARG GHCR_OWNER=rigaya
FROM ghcr.io/${GHCR_OWNER}/amatsukaze-builder:ubuntu2204

ARG DEBIAN_FRONTEND=noninteractive \
    OSVER=ubuntu2204 \
    AVISYNTHPLUS_DEB_NAME=https://github.com/rigaya/AviSynthCUDAFilters/releases/download/0.7.3/avisynth_3.7.5-1_amd64_Ubuntu22.04.deb

ENV LANG=ja_JP.UTF-8
ENV LC_ALL=ja_JP.UTF-8
ENV LC_CTYPE=ja_JP.UTF-8
USER root
RUN apt-get update \
    && wget -q ${AVISYNTHPLUS_DEB_NAME} -O avisynth.deb \
    && apt-get install -y ./avisynth.deb \
    && apt-get clean \
    && rm -rf /var/lib/apt/lists/* \
    && rm avisynth.deb

WORKDIR /work

ENV AMT_BASELIBS_DIR=/amt/baselibs
ENV AMT_PKGCONFIG_FFNK_DIR=/amt/ffmpeg_nekopanda/build/lib/pkgconfig
ENV AMT_PKGCONFIG_FF612_DIR=/amt/ffmpeg_612/build/lib/pkgconfig


